<div class="brand-container">
  <div class="brand-title-options">
    <h2 class="brand-title">
      Featured Instant Coupons ({{ brands().length }})
    </h2>
    <div class="options">
      <ion-button><ion-icon name="list-outline"></ion-icon></ion-button>
      <ion-button><ion-icon name="grid-outline"></ion-icon></ion-button>
      <mat-form-field appearance="outline" class="sort-select">
        <mat-label>Sort By</mat-label>
        <mat-select
          [ngModel]="currentSortValue"
          (ngModelChange)="onSortChange($event)"
        >
          <mat-option value="nombreMarca-asc">Nombre A-Z</mat-option>
          <mat-option value="nombreMarca-desc">Nombre Z-A</mat-option>
          <mat-option value="descripcion-asc">Descripción A-Z</mat-option>
          <mat-option value="descripcion-desc">Descripción Z-A</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  @if (loading()) {
  <div class="brand-loading">
    <p>Cargando marcas...</p>
  </div>
  } @else if (error()) {
  <div class="brand-error">
    <p>Error al cargar marcas: {{ error() }}</p>
  </div>
  } @else if (brands().length === 0) {
  <div class="brand-empty">
    <p>No hay marcas disponibles para esta categoría</p>
  </div>
  } @else {
  <div class="brand-grid">
    @for (brand of displayedBrands(); track brand.idItem) {
    <app-coupon
      [logo]="brand.imagen"
      [brand]="brand.nombreMarca"
      [title]="brand.descripcion"
      [action]="'Ver ofertas'"
      [subtitle]="brand.nombreMarca"
    ></app-coupon>
    }
  </div>
  } @if (hasMore()) {
  <div class="brand-more">
    <button class="brand-more-link" (click)="showAllBrands()">
      MORE INSTANT COUPONS <ion-icon name="chevron-forward-outline"></ion-icon>
    </button>
  </div>
  }
</div>
